!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__form-input_type_error",errorClass:"modal__error_visible"};document.querySelector(".modal__form");var t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formEl=t,this._inputEls=[...this._formEl.querySelectorAll(this._inputSelector)],this._submitButton=this._formEl.querySelector(this._submitButtonSelector)}_hideInputError(e){const t=this._formEl.querySelector(`#${e.id}-Error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_showInputError(e){const t=this._formEl.querySelector(`#${e.id}-Error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return this._inputEls.some((e=>!e.validity.valid||""===e.value.trim()))}_toggleButtonState(){this._hasInvalidInput()?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))})),this._toggleButtonState()}enableValidation(){this._formEl.addEventListener("submit",(e=>{e.preventDefault(),this._toggleButtonState()})),this._setEventListeners()}},s=class{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._deleteButton.addEventListener("click",(()=>this._handleDeleteCard())),this._likeButton.addEventListener("click",(()=>this._handleLikeIcon())),this._cardImage.addEventListener("click",(()=>this._handlePreviewClick()))}_handleDeleteCard(){this._element.remove(),this._element=null}_handleLikeIcon(){this._likeButton.classList.toggle("card__like-button-active")}_handlePreviewClick(){this._handleImageClick(this._name,this._link)}getView(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".card__image"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardTitle=this._element.querySelector(".card__title"),this._cardTitle.textContent=this._name,this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__button-delete"),this._setEventListeners(),this._element}},o=class{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}_handleEscClose(e){"Escape"===e.key&&this.close()}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose)}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close()}))}},n=class extends o{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super({popupSelector:t}),this._handleFormSubmit=s,this._form=this._popupElement.querySelector(".modal__form"),this._inputList=this._form.querySelectorAll(".modal__form-input")}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t),super.close(),this._form.reset()}))}};const r=document.querySelector("#profile-edit-btn"),i=document.querySelector("#profile-edit-modal"),l=document.querySelector("#profile-addcard-modal"),a=(i.querySelector(".modal__close"),l.querySelector(".modal__close"),document.querySelector("#profile__title-js"),document.querySelector("#profile__description-js"),document.querySelector("#profile__Title-Input"),document.querySelector("#profile__Description-Input"),i.querySelector("#profile__edit-form")),c=(document.querySelector("#card-template").content.firstElementChild,document.querySelector(".cards__list"),document.querySelector(".profile__add-button")),u=document.querySelector("#profile-addcard-modal"),_=(document.querySelector("#profile__addTitle-Input"),document.querySelector("#profile__url-Input"),document.querySelector("#preview-modal")),m=(_.querySelector(".modal__image"),_.querySelector(".modal__caption"),_.querySelector(".modal__close-preview"),document.querySelector("#profile__Title-Input")),d=document.querySelector("#profile__Description-Input");function p(e,t){const o=new s(e,"#card-template",h).getView();t.addItem(o)}function h(e,t){y.open({name:e,link:t})}new t(e,u).enableValidation(),new t(e,a).enableValidation();const S=new class{constructor(e){let{items:t,renderer:s,containerSelector:o}=e;this._items=t,this._renderer=s,this._container=document.querySelector(o)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>p(e,S),containerSelector:".cards__list"});S.renderItems();const E=new n({popupSelector:"#profile-addcard-modal",handleFormSubmit:e=>{p({name:e.title,link:e.description},S),E.close()}});c.addEventListener("click",(()=>E.open())),E.setEventListeners();const f=new n({popupSelector:"#profile-edit-modal",handleFormSubmit:e=>{v.setUserInfo({name:e.title,job:e.description}),f.close()}}),v=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e){let{name:t,job:s}=e;this._nameElement.textContent=t,this._jobElement.textContent=s}}({nameSelector:"#profile__title-js",jobSelector:"#profile__description-js"});r.addEventListener("click",(()=>{const{name:e,job:t}=v.getUserInfo();m.value=e,d.value=t,f.open(),f.setEventListeners()}));const y=new class extends o{constructor(e){super({popupSelector:e}),this._imageElement=this._popupElement.querySelector(".modal__image"),this._captionElement=this._popupElement.querySelector(".modal__caption")}open(e){let{link:t,name:s}=e;this._imageElement.src=t,this._imageElement.alt=s,this._captionElement.textContent=s,super.open()}}("#preview-modal");y.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQVFjLEVBQ2xCb0QsRUFBaUJsRSxNQUFROEYsRUFDekJKLEVBQWNoRCxPQUNkZ0QsRUFBYzlDLG1CQUFtQixJQUluQyxNQUFNOEIsRUFBYSxJRy9QbkIsY0FBNkIzQixFQUMzQjVFLFdBQUFBLENBQVlnRSxHQUNWYyxNQUFNLENBQUVkLGtCQUNSN0QsS0FBSytILGNBQWdCL0gsS0FBSzhELGNBQWNsRSxjQUFjLGlCQUN0REksS0FBS2dJLGdCQUFrQmhJLEtBQUs4RCxjQUFjbEUsY0FBYyxrQkFDMUQsQ0FDQXdFLElBQUFBLENBQUlSLEdBQWlCLElBQWhCLEtBQUVsQixFQUFJLEtBQUVGLEdBQU1vQixFQUNqQjVELEtBQUsrSCxjQUFjdEUsSUFBTWYsRUFDekIxQyxLQUFLK0gsY0FBY3JFLElBQU1sQixFQUN6QnhDLEtBQUtnSSxnQkFBZ0JoSCxZQUFjd0IsRUFDbkNtQyxNQUFNUCxNQUNSLEdIb1BvQyxrQkFDdENnQyxFQUFXOUIsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvcG9wdXAuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcclxuICogICAgICAgICAgICAgICAgICAgICAgIGNhcmRzXHJcbiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKlxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgdmFsZGl0aW9uXHJcbiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5leHBvcnQgY29uc3QgZm9ybVZhbGlkYXRvckNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0taW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9fZm9ybS1pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5fZm9ybUVsID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IFsuLi50aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tRXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1FcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRFbHMuc29tZShcclxuICAgICAgKGlucHV0KSA9PiAhaW5wdXQudmFsaWRpdHkudmFsaWQgfHwgaW5wdXQudmFsdWUudHJpbSgpID09PSBcIlwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IEZvcm1WYWxpZGF0b3JDb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtLWlucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2Zvcm0taW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbmNvbnN0IGZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihGb3JtVmFsaWRhdG9yQ29uZmlnLmZvcm1TZWxlY3Rvcik7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKClcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUljb24oKSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVQcmV2aWV3Q2xpY2soKSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uLWFjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVQcmV2aWV3Q2xpY2soKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvbi1kZWxldGVcIik7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENhcmQ7XHJcbiIsImNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIC8vY29uc29sZS5sb2coXCJrZXkgd2FzIHByZXNzXCIpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikgfHxcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cDtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL3BvcHVwXCI7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fZm9ybS1pbnB1dFwiKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBmb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdChpbnB1dFZhbHVlcyk7XHJcbiAgICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoRm9ybTtcclxuIiwiaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBmb3JtVmFsaWRhdG9yQ29uZmlnIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL3BvcHVwLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcblxyXG4vLyBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbi8vICAge1xyXG4vLyAgICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuLy8gICB9LFxyXG5cclxuLy8gICB7XHJcbi8vICAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbi8vICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbi8vICAgfSxcclxuXHJcbi8vICAge1xyXG4vLyAgICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4vLyAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4vLyAgIH0sXHJcblxyXG4vLyAgIHtcclxuLy8gICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4vLyAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbi8vICAgfSxcclxuXHJcbi8vICAge1xyXG4vLyAgICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4vLyAgIH0sXHJcblxyXG4vLyAgIHtcclxuLy8gICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4vLyAgIH0sXHJcbi8vIF07XHJcblxyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNcclxuIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnRuXCIpO1xyXG5jb25zdCBtb2RlbFByb2ZpbGVFZGl0V2luZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XHJcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGRjYXJkLW1vZGFsXCIpO1xyXG5jb25zdCBwcm9maWxlTW9kYWxDbG9zZUJ1dHRvbiA9XHJcbiAgbW9kZWxQcm9maWxlRWRpdFdpbmRvdy5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuY29uc3QgYWRkQ2FyZGVNb2RhbENsb3NlQnV0dG9uID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG5jb25zdCBwcm9maWxlVGl0bGVFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlX190aXRsZS1qc1wiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZV9fZGVzY3JpcHRpb24tanNcIlxyXG4pO1xyXG5jb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9fVGl0bGUtSW5wdXRcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlX19EZXNjcmlwdGlvbi1JbnB1dFwiXHJcbik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0Zm9ybSA9IG1vZGVsUHJvZmlsZUVkaXRXaW5kb3cucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlX19lZGl0LWZvcm1cIlxyXG4pO1xyXG5jb25zdCBjYXJkVGVtcGxhdGUgPVxyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKS5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkO1xyXG5jb25zdCBjYXJkTGlzdEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgYWRkQ2FyZEZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZGNhcmQtbW9kYWxcIik7XHJcbmNvbnN0IGNhcmRUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlX19hZGRUaXRsZS1JbnB1dFwiKTtcclxuY29uc3QgY2FyZFVybElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlX191cmwtSW5wdXRcIik7XHJcbmNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcclxuY29uc3QgcHJldmlld01vZGFsSW1hZ2UgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbmNvbnN0IHByZXZpZXdNb2RhbENhcHRpb24gPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcclxuY29uc3QgcHJldmlld01vZGFsQ2xvc2VCdG4gPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcclxuICBcIi5tb2RhbF9fY2xvc2UtcHJldmlld1wiXHJcbik7XHJcbmNvbnN0IGlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9fVGl0bGUtSW5wdXRcIik7XHJcbmNvbnN0IGlucHV0RGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX0Rlc2NyaXB0aW9uLUlucHV0XCIpO1xyXG5cclxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcclxuKiAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc1xyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcclxuKiAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbnNcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuLypcclxuZnVuY3Rpb24gY2xvc2VQb3B1cChtb2RhbCkge1xyXG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgY2xvc2VNb2RhbEVzYyk7XHJcbiAgbW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBjbG9zZU1vZGFsT3ZlcmxheSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9wZW5Qb3B1cChtb2RhbCkge1xyXG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgY2xvc2VNb2RhbEVzYyk7XHJcbiAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBjbG9zZU1vZGFsT3ZlcmxheSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlTW9kYWxPdmVybGF5KGUpIHtcclxuICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikpIHtcclxuICAgIGNsb3NlUG9wdXAoZS50YXJnZXQpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2xvc2VNb2RhbEVzYyhldnQpIHtcclxuICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgY29uc3QgbW9kYWxPcGVuZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGlmIChtb2RhbE9wZW5lZCkge1xyXG4gICAgICBjbG9zZVBvcHVwKG1vZGFsT3BlbmVkKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuKi9cclxuLy8gZnVuY3Rpb24gcmVuZGVyY2FyZChjYXJkRGF0YSwgd2FycHBlcikge1xyXG4vLyAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoY2FyZERhdGEpO1xyXG4vLyAgIHdhcnBwZXIucHJlcGVuZChjYXJkRWxlbWVudCk7XHJcbi8vIH1cclxuXHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKlxyXG4qICAgICAgICAgICAgICAgICAgICAgICBldmVudHMgaGFuZGxlcnNcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuLy8gZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQoZSkge1xyXG4vLyAgIGUucHJldmVudERlZmF1bHQoZSk7XHJcbi8vICAgcHJvZmlsZVRpdGxlRWRpdC50ZXh0Q29udGVudCA9IHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlO1xyXG4vLyAgIHByb2ZpbGVEZXNjcmlwdGlvbkVkaXQudGV4dENvbnRlbnQgPSBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZTtcclxuLy8gICBjbG9zZVBvcHVwKG1vZGVsUHJvZmlsZUVkaXRXaW5kb3cpO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBoYW5kbGVQcm9maWxlQWRkU3VibWl0KGUpIHtcclxuLy8gICBlLnByZXZlbnREZWZhdWx0KGUpO1xyXG4vLyAgIGNvbnN0IG5hbWUgPSBjYXJkVGl0bGVJbnB1dC52YWx1ZTtcclxuLy8gICBjb25zdCBsaW5rID0gY2FyZFVybElucHV0LnZhbHVlO1xyXG4vLyAgIHJlbmRlcmNhcmQoeyBuYW1lLCBsaW5rIH0sIGNhcmRMaXN0RWwpO1xyXG4vLyAgIGNsb3NlUG9wdXAoYWRkQ2FyZE1vZGFsKTtcclxuLy8gICBlLnRhcmdldC5yZXNldCgpO1xyXG4vLyB9XHJcblxyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcclxuKiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50cyBsaXN0ZW5lcnNcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBwcm9maWxlVGl0bGVFZGl0LnRleHRDb250ZW50LnRyaW0oKTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbkVkaXQudGV4dENvbnRlbnQudHJpbSgpO1xyXG4gIC8vIG1vZGVsUHJvZmlsZUVkaXRXaW5kb3cuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICBvcGVuUG9wdXAobW9kZWxQcm9maWxlRWRpdFdpbmRvdyk7XHJcbn0pO1xyXG5cclxucHJvZmlsZU1vZGFsQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgY2xvc2VQb3B1cChtb2RlbFByb2ZpbGVFZGl0V2luZG93KVxyXG4pO1xyXG5cclxucHJvZmlsZUVkaXRmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQpO1xyXG5hZGRDYXJkRm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVQcm9maWxlQWRkU3VibWl0KTtcclxuXHJcbi8vYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gcG9wdXBGb3JtQWRkLm9wZW4oKSk7XHJcblxyXG5hZGRDYXJkZU1vZGFsQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgY2xvc2VQb3B1cChhZGRDYXJkTW9kYWwpXHJcbik7XHJcbnByZXZpZXdNb2RhbENsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY2xvc2VQb3B1cChwcmV2aWV3TW9kYWwpO1xyXG59KTtcclxuKi9cclxuXHJcbi8vIC8vIHZhbGlkYXRpb25cclxuXHJcbi8vIGNvbnN0IGZvcm1WYWxpZGF0b3JDb25maWcgPSB7XHJcbi8vICAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4vLyAgIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtLWlucHV0XCIsXHJcbi8vICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuLy8gICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuLy8gICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2Zvcm0taW5wdXRfdHlwZV9lcnJvclwiLFxyXG4vLyAgIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxuLy8gfTtcclxuXHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBmb3JtVmFsaWRhdG9yQ29uZmlnLFxyXG4gIGFkZENhcmRGb3JtRWxlbWVudFxyXG4pO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgZm9ybVZhbGlkYXRvckNvbmZpZyxcclxuICBwcm9maWxlRWRpdGZvcm1cclxuKTtcclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuZnVuY3Rpb24gcmVuZGVyY2FyZChpdGVtLCBzZWN0aW9uSW50YW5jZSkge1xyXG4gIGNvbnN0IGNhcmQgPSBnZXRDYXJkRWxlbWVudChpdGVtKTtcclxuICBzZWN0aW9uSW50YW5jZS5hZGRJdGVtKGNhcmQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChkYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGRhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgb3BlbkltYWdlUHJldmlldyk7XHJcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuSW1hZ2VQcmV2aWV3KG5hbWUsIGxpbmspIHtcclxuICAvLyBwcmV2aWV3TW9kYWxJbWFnZS5zcmMgPSBsaW5rO1xyXG4gIC8vIHByZXZpZXdNb2RhbEltYWdlLmFsdCA9IG5hbWU7XHJcbiAgLy8gcHJldmlld01vZGFsQ2FwdGlvbi50ZXh0Q29udGVudCA9IGluaXRpYWxDYXJkcy5uYW1lO1xyXG4gIGltYWdlUG9wdXAub3Blbih7IG5hbWUsIGxpbmsgfSk7XHJcbn1cclxuLy8gc2VjdGlvblxyXG5cclxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKHtcclxuICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gIHJlbmRlcmVyOiAoaXRlbSkgPT4gcmVuZGVyY2FyZChpdGVtLCBzZWN0aW9uKSxcclxuICBjb250YWluZXJTZWxlY3RvcjogXCIuY2FyZHNfX2xpc3RcIixcclxufSk7XHJcblxyXG5zZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG4vL3BvcHVwIHdpdGggZm9ybVxyXG5cclxuY29uc3QgcG9wdXBGb3JtQWRkID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiI3Byb2ZpbGUtYWRkY2FyZC1tb2RhbFwiLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XHJcbiAgICBjb25zdCBjYXJkRGF0YVBvcHVwID0ge1xyXG4gICAgICBuYW1lOiBkYXRhLnRpdGxlLFxyXG4gICAgICBsaW5rOiBkYXRhLmRlc2NyaXB0aW9uLFxyXG4gICAgfTtcclxuICAgIHJlbmRlcmNhcmQoY2FyZERhdGFQb3B1cCwgc2VjdGlvbik7XHJcbiAgICBwb3B1cEZvcm1BZGQuY2xvc2UoKTtcclxuICB9LFxyXG59KTtcclxuXHJcbmFkZE5ld0NhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHBvcHVwRm9ybUFkZC5vcGVuKCkpO1xyXG5cclxucG9wdXBGb3JtQWRkLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwb3B1cEZvcm1FZGl0ID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChmb3JtRGF0YSkgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgICBuYW1lOiBmb3JtRGF0YS50aXRsZSxcclxuICAgICAgam9iOiBmb3JtRGF0YS5kZXNjcmlwdGlvbixcclxuICAgIH0pO1xyXG4gICAgcG9wdXBGb3JtRWRpdC5jbG9zZSgpO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogXCIjcHJvZmlsZV9fdGl0bGUtanNcIixcclxuICBqb2JTZWxlY3RvcjogXCIjcHJvZmlsZV9fZGVzY3JpcHRpb24tanNcIixcclxufSk7XHJcblxyXG5wcm9maWxlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHsgbmFtZSwgam9iIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIGlucHV0TmFtZS52YWx1ZSA9IG5hbWU7XHJcbiAgaW5wdXREZXNjcmlwdGlvbi52YWx1ZSA9IGpvYjtcclxuICBwb3B1cEZvcm1FZGl0Lm9wZW4oKTtcclxuICBwb3B1cEZvcm1FZGl0LnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbn0pO1xyXG5cclxuLy8gcG9wdXAgd2l0aCBpbWFnZVxyXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3ByZXZpZXctbW9kYWxcIik7XHJcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuIiwiY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIsIGNvbnRhaW5lclNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uO1xyXG4iLCJjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgam9iIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBVc2VySW5mbztcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL3BvcHVwXCI7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXB0aW9uRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xyXG4gIH1cclxuICBvcGVuKHsgbGluaywgbmFtZSB9KSB7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuc3JjID0gbGluaztcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fY2FwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XHJcbiJdLCJuYW1lcyI6WyJmb3JtVmFsaWRhdG9yQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfZm9ybUVsIiwiX2lucHV0RWxzIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJfaGlkZUlucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRleHRDb250ZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzb21lIiwiaW5wdXQiLCJ2YWx1ZSIsInRyaW0iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJkaXNhYmxlZCIsIl9zZXRFdmVudExpc3RlbmVycyIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9kZWxldGVCdXR0b24iLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9saWtlQnV0dG9uIiwiX2hhbmRsZUxpa2VJY29uIiwiX2NhcmRJbWFnZSIsIl9oYW5kbGVQcmV2aWV3Q2xpY2siLCJfZWxlbWVudCIsInRvZ2dsZSIsImdldFZpZXciLCJzcmMiLCJhbHQiLCJfY2FyZFRpdGxlIiwiX3JlZiIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsImV2dCIsImtleSIsImNsb3NlIiwib3BlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXAiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtIiwiX2lucHV0TGlzdCIsIl9nZXRJbnB1dFZhbHVlcyIsImZvcm1WYWx1ZXMiLCJpbnB1dFZhbHVlcyIsInJlc2V0IiwicHJvZmlsZUVkaXRCdG4iLCJtb2RlbFByb2ZpbGVFZGl0V2luZG93IiwiYWRkQ2FyZE1vZGFsIiwicHJvZmlsZUVkaXRmb3JtIiwiYWRkTmV3Q2FyZEJ1dHRvbiIsImZpcnN0RWxlbWVudENoaWxkIiwiYWRkQ2FyZEZvcm1FbGVtZW50IiwicHJldmlld01vZGFsIiwiaW5wdXROYW1lIiwiaW5wdXREZXNjcmlwdGlvbiIsInJlbmRlcmNhcmQiLCJpdGVtIiwic2VjdGlvbkludGFuY2UiLCJjYXJkIiwiQ2FyZCIsIm9wZW5JbWFnZVByZXZpZXciLCJhZGRJdGVtIiwiaW1hZ2VQb3B1cCIsIkZvcm1WYWxpZGF0b3IiLCJzZWN0aW9uIiwiaXRlbXMiLCJyZW5kZXJlciIsImNvbnRhaW5lclNlbGVjdG9yIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiZWxlbWVudCIsInByZXBlbmQiLCJwb3B1cEZvcm1BZGQiLCJQb3B1cFdpdGhGb3JtIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInBvcHVwRm9ybUVkaXQiLCJmb3JtRGF0YSIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJqb2IiLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJfcmVmMiIsIl9pbWFnZUVsZW1lbnQiLCJfY2FwdGlvbkVsZW1lbnQiXSwic291cmNlUm9vdCI6IiJ9